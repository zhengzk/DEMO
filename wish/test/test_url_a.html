<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title> Test parseURL of a</title>
</head>

<body>
<script type="text/javascript">
    var parseUrl = function (url) {
        var hasOwnProp = Object.prototype.hasOwnProperty;
        var setVal = function (obj1, obj2) {
            if (!obj2) {
                return obj1;
            }
            for (var key in obj1) {
//                    console.log(hasOwnProp.call(obj1,key));
//                    console.log(obj1[key]);
                    //console.log(obj2[key]);
                if(hasOwnProp.call(obj1,key) && "undefined" != typeof obj2[key]){
                    obj1[key] = obj2[key];
                }
            }
            return obj1;
        }

        var res = {
            hash: "", //从井号 (#) 开始的 URL（锚）。
            host: "",//主机名和 URL 的端口号。
            hostname: "",// URL 的主机名。
            href: "",//完整的 URL
            pathname: "",//URL 的路径部分
            port: "",//URL 的端口号
            protocol: "",// URL 的协议
            search: "",//从问号 (?) 开始的 URL（查询部分）
            username: "",
            password: "",
            origin: "",
            searchParams: null
        }

        var a = document.createElement('a');//HTMLAnchorElement
        a.href = url;
        res = setVal(res, a);

        return res;
    }

    var test = function (urls) {
        for (var k = 0, len = urls.length; k < len; k++) {
            var res = parseUrl(urls[k]);
            if ("undefined" != typeof console) {
                console.log(res);
            }

            for (var j in res) {
                document.write(j + ':' + res[j] + '<br/>');
            }
            document.write('--------------------------------------------------<br/>');
        }
    }

    var urls = [
        'http://www.youku.com',
        //'http://zhengzk:123456@youku.com:1234\aa\bb\cc?a=1&b=2#qqq',
        'http://v.youku.com/v_show/id_XNzE3NzIxMTky.html?from=y1.3-idx-uhome-1519-20887.205805-205902.6-4',
        'http://user:password@www.yoku.com:1234/test/test.asp?id=1#test'
    ];
    //window.onload = function(){
        test(urls);
    //}

</script>
</body>
</html>
