<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>RIA-首页</title>
    <link type="text/css" rel="stylesheet" href="../static/css/basic.css"/>
    <link type="text/css" rel="stylesheet" href="css/index.css"/>
    <script type="text/javascript" src="../static/third/jquery-1.7.2.min.js"></script>
    <script type="text/javascript">RELATIVE_PATH='';</script>
</head>
<body>
    <div class="ria-navi">
        <div class="inline container">
            <a class="menu current" href="#all">全部</a>
            <a class="menu" href="#people">人物</a>
            <a class="menu" href="#">风光</a>
            <a class="menu" href="#">私房</a>
            <a class="menu" href="#">纪实</a>
            <a class="menu" href="#">野生动物</a>
        </div>
    </div>

    <div class="ria-body" id="people">
        <div class="wrapper">
            <img class="item" src="test/images/01.jpg">
            <img class="item" src="test/images/02.jpg">
            <img class="item" src="test/images/03.jpg">
            <img class="item" src="test/images/04.jpg">
            <img class="item" src="test/images/05.jpg">
            <img class="item" src="test/images/01.png">
            <img class="item" src="test/images/02.png">
            <img class="item" src="test/images/03.png">
            <img class="item" src="test/images/04.png">
            <img class="item" src="test/images/05.png">
            <img class="item" src="test/images/06.png">
            <img class="item" src="test/images/07.png">
            <img class="item" src="test/images/08.png">
        </div>
    </div>
    <script type="text/javascript" src="js/basic.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            var fl = new ria.component.FlowLayout($('.ria-body .wrapper')[0],{
                items:$('.ria-body .item').toArray()
            });
        });
        (function($) {
            var reflushImgData = function (imgData){
//                var pre = $('.ria-body .container')[0];
//                var container = pre.cloneNode(false);
//                $('.ria-body')[0].replaceChild(pre,container);
                imgData = imgData || '';
//                var container = document.createElement("div");
//                console.log(imgData);
//
//                $('.ria-body').empty().append(container);

            }

            var changePage = function(){
                var hash = (!window.location.hash)?"#all":window.location.hash;

                model.getImgData({tag: ''}, function (data) {
                    $('.menu.current').removeClass('current');
                    $('.menu[href="'+ hash +'"]').addClass('current');
                    reflushImgData(data);
                }, function () {

                });
            }
            window.onhashchange = function(){
                changePage();
            }
            changePage();
        })(jQuery);
    </script>
</body>
</html>